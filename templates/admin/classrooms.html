{% extends '/include/layout.html' %}
{% block title %}Classrooms{% endblock %}
{% block header %}<h2>Classrooms</h2>{% endblock %}
{% block content %}
    <!-- CREATE -->
    <h3>Create a Classroom</h3>
    <form class="clean-form" method="POST" action="{{ url_for('admin_classrooms') }}">
        <label>Building:</label>
        <select name="building" required>
            <option value="">-- Select Building --</option>
            {% for b in buildings %}
                <option value="{{ b }}">{{ b }}</option>
            {% endfor %}
        </select>

        <label>Room Number:</label>
        <input name="room_number" type="number" required>

        <label>Capacity:</label>
        <input name="capacity" type="number" required>

        <button onclick="return confirm('Create this classroom?');">Create Classroom</button>
    </form>

    <!-- READ, UPDATE, & DELETE -->
    <h3>Existing Classrooms: Update and Delete</h3>
    <table class="clean-table">
        <thead>
            <tr>
                <th>Building</th>
                <th>Room Number</th>
                <th>Capacity</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for bld, room, cap in classrooms %}
            <tr>
                <form method="POST" action="{{ url_for('update_classroom') }}">
                    <td>
                        <select name="building" required>
                            {% for building in buildings %}
                                <option value="{{ building }}" {% if building == bld %}selected{% endif %}>
                                    {{ building }}
                                </option>
                            {% endfor %}
                        </select>
                    </td>
                    <td>
                        <input type="number" name="room_number" value="{{ room }}" required>
                    </td>
                    <td>
                        <input type="number" name="capacity" value="{{ cap }}" required>
                    </td>

                    <!-- Hidden original keys for update -->
                    <input type="hidden" name="original_building" value="{{ bld }}">
                    <input type="hidden" name="original_room_number" value="{{ room }}">

                    <td>
                        <button onclick="return confirm('Update this classroom?');">Update</button>
                </form>

                        <form style="display:inline;" method="POST" action="{{ url_for('delete_classroom') }}">
                            <input type="hidden" name="building" value="{{ bld }}">
                            <input type="hidden" name="room_number" value="{{ room }}">
                            <button onclick="return confirm('Delete this classroom?');">Delete</button>
                        </form>
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
