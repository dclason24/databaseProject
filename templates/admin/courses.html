{% extends  '/include/layout.html' %}
{% block title %}Courses{% endblock %}
{% block header %}<h2>Courses</h2>{% endblock %}
{% block content %}
    <!-- CREATE -->
    <h3>Create a Course</h3>
    <form class="clean-form" method="POST" action="{{ url_for('create_course') }}">
        <label>Course ID:</label>
        <input name="course_id" required>

        <label>Title:</label>
        <input name="title" required>

        <label>Department:</label>
        <select name="dept_name" required>
            <option value="">-- Select Department --</option>
            {% for d in departments %}
                <option value="{{ d }}">{{ d }}</option>
            {% endfor %}
        </select>

        <label>Credits:</label>
        <input type="number" name="credits" min="1" max="10" required>

        <button onclick="return confirm('Create this course?');">Create Course</button>
    </form>
    
    <!-- READ, UPDATE, & DELETE -->
    <h3>Existing Courses: Update and Delete</h3>

    <table class="clean-table">
        <thead>
            <tr>
                <th>Course ID</th>
                <th>Title</th>
                <th>Department</th>
                <th>Credits</th>
                <th>Actions</th>
            </tr>
        </thead>

        <tbody>
            {% for c in courses %}
            <tr>
                <form method="POST" action="{{ url_for('update_course', course_id=c[0]) }}">
                    <td>
                        <input name="course_id" value="{{ c[0] }}" required>
                    </td>
                    <td>
                        <input name="title" value="{{ c[1] }}" required>
                    </td>
                    <td>
                        <select name="dept_name" required>
                            {% for d in departments %}
                                <option value="{{ d }}" {% if d == c[2] %}selected{% endif %}>{{ d }}</option>
                            {% endfor %}
                        </select>
                    </td>
                    <td>
                        <input type="number" name="credits" value="{{ c[3] }}" min="1" max="10" required>
                    </td>

                    <td>
                        <button onclick="return confirm('Update this course?');">Update</button>
                </form>

                        <form style="display:inline;" method="POST"
                            action="{{ url_for('delete_course', course_id=c[0]) }}">
                            <button onclick="return confirm('Delete this course?');">Delete</button>
                        </form>
                    </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
