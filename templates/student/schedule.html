{% extends '/include/layout.html' %}
{% block title %}Schedule{% endblock %}
{% block header %}<h2>Schedule</h2>{% endblock %}
{% block content %}
    <h3>Filter by Semester</h3>
    <!-- Semester/Year Filter -->
    <form method="POST" class="clean-form">
        <label>Semester:</label>
        <select name="semester" required>
            {% for sem in semesters %}
                <option value="{{ sem }}" {% if sem == selected_semester %}selected{% endif %}>{{ sem }}</option>
            {% endfor %}
        </select>

        <label>Year:</label>
        <select name="year" required>
            {% for yr in years %}
                <option value="{{ yr }}" {% if yr == selected_year %}selected{% endif %}>{{ yr }}</option>
            {% endfor %}
        </select>

        <button type="submit">Filter</button>
    </form>

    <!-- Schedule Table -->
    <h3>Your Personal Schedule</h3>
    {% if schedule %}
    <table class="clean-table">
        <thead>
            <tr>
                <th>Course</th>
                <th>Instructor</th>
                <th>Semester</th>
                <th>Year</th>
                <th>Days</th>
                <th>Time</th>
                <th>Room</th>
            </tr>
        </thead>
        <tbody>
            {% for s in schedule %}
            <tr>
                <td>{{ s[1] }}</td>
                <td>{{ s[2] }}</td>
                <td>{{ s[3] }}</td>
                <td>{{ s[4] }}</td>
                <td>{{ s[5] }}</td>
                <td>{{ "%02d"|format(s[6]) }}:{{ "%02d"|format(s[7]) }} -
                    {{ "%02d"|format(s[8]) }}:{{ "%02d"|format(s[9]) }}
                </td>
                <td>{{ s[10] }} {{ s[11] }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>No courses enrolled for {{ selected_semester }} {{ selected_year }}.</p>
    {% endif %}
{% endblock %}
